<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ben Harrap">
<meta name="dcterms.date" content="2023-07-17">

<title>A brief introduction to research for health professionals – Ben Harrap</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../../img/randy.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-76a1943aa528a4846e4152a694de7f96.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d6c0234beb521fbcf326a66e2c93b7a4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@100..900&amp;family=Nunito:ital,wght@0,200..1000;1,200..1000&amp;display=swap" rel="stylesheet">
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="benharrap" data-description="Support me on Buy me a coffee!" data-message="" data-color="#ffddd6" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XYMGR0N804"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XYMGR0N804');
</script>


<meta property="og:title" content="A brief introduction to research for health professionals – Ben Harrap">
<meta property="og:description" content="Research on the Run 2021, Ballarat Health Services">
<meta property="og:image" content="collaboration.png">
<meta property="og:site_name" content="Ben Harrap">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ben Harrap</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../post.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A brief introduction to research for health professionals</h1>
<p class="subtitle lead">Research on the Run 2021, Ballarat Health Services</p>
  <div class="quarto-categories">
    <div class="quarto-category">research</div>
    <div class="quarto-category">consulting</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ben Harrap </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 17, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>I originally did this talk for Ballarat Health Services (now Grampians Health) back in 2021. I’d intended to upload the recording but unfortunately it didn’t materialise! Instead I’ve put the material from the talk here. I was first asked to do a ‘Stats 101’ talk for clinicians, but I don’t think that’s ever going to be useful. So instead, I wrote this talk to try and address the most common problems I face as a consultant biostatistician.</p>
<section id="lets-work-together" class="level2">
<h2 class="anchored" data-anchor-id="lets-work-together">Let’s work together</h2>
<p><img src="collaboration.png" class="img-fluid"></p>
<p>The first thing that I want to acknowledge is that your time is precious and limited - I’m frankly amazed at your ability to fit research into your already busy jobs. It’s a testament to the passion and interest that you all have in learning and improving your practice. So given your busy when we work together I’ll do my best to work around your schedule and capacity.</p>
<p>When we are working together, you bring your clinical expertise and content knowledge to the table along with a question you think is important. I bring my statistical and methodological expertise that can help answer your question and my main goal is to help you do the best research that you can.</p>
<p>Now because I don’t have your clinical background, when we’re working together I’m going to have to ask you a lot of questions at the beginning to make sure I understand what the clinical context is. This is really important for me to be able to guide us towards a study design or analysis method that’s going to help answer the question that you have.</p>
<p>I’m not trying to make your life difficult by asking you 20 questions, I promise. I do want to note though that in the process of asking you 20 questions it’s not unlikely that your original question will change slightly, perhaps due to some constraint of available data or the number of people that’s feasible to recruit into your study, or some other reason. Don’t be disheartened when this happens, it’s a good thing - we’re refining your research question into something workable!</p>
</section>
<section id="when-to-talk-to-me-or-any-statistician" class="level2">
<h2 class="anchored" data-anchor-id="when-to-talk-to-me-or-any-statistician">When to talk to me (or any statistician)</h2>
<p><img src="talk2.png" class="img-fluid"></p>
<p>Quite often I’ll have people come seek my help after they’ve already done the data collection.</p>
</section>
<section id="when-to-talk-to-me-or-any-statistician-1" class="level2">
<h2 class="anchored" data-anchor-id="when-to-talk-to-me-or-any-statistician-1">When to talk to me (or any statistician)</h2>
<p><img src="talk3.png" class="img-fluid"></p>
<p>If you come to me only at the data analysis stage, the chances of me being able to help are low! Come and see me before then.</p>
</section>
<section id="when-to-talk-to-me-or-any-statistician-2" class="level2">
<h2 class="anchored" data-anchor-id="when-to-talk-to-me-or-any-statistician-2">When to talk to me (or any statistician)</h2>
<p><img src="talk4.png" class="img-fluid"></p>
<p>I can help at all of these stages, but we should start chatting at the very early stages of your research.</p>
<p>This is a broad overview of the different stages of research. We start off at the research question formulation stage and progress through each stage sequentially.</p>
<p>Quite often people progress through these stages and only talk to a statistician at the analysis stage. Having been in this situation a number of times I can tell you that it’s really challenging to be able to help. More often than not it turns out that I can’t answer the research question with the data that’s been gathered, and this is frustrating for everyone involved. So please try to involve a statistician earlier on.</p>
<p>If you come to me early on in the planning phase we can work together to create a comprehensive methods section of the protocol and set your study up for success. Once we’ve done this it will be much easier for myself, or another statistician, or even yourself, to be able to perform the analysis.</p>
</section>
<section id="lets-start-at-the-start" class="level2">
<h2 class="anchored" data-anchor-id="lets-start-at-the-start">Let’s start at the start</h2>
<p><img src="step1.png" class="img-fluid"></p>
<p>Let’s start off at the research question stage. It’s really important to think carefully and come up with a very explicit research question. It’s OK to start off with some general ideas for what you’re interested in but you need to pin down exactly what you are trying to find out and write this as a research question. Once you’ve figured this question out it’s a good time to come and chat to me</p>
</section>
<section id="think-carefully-about-your-research-question" class="level2">
<h2 class="anchored" data-anchor-id="think-carefully-about-your-research-question">Think carefully about your research question</h2>
<p>A handy framework to use in creating a research question is the PICOT:</p>
<ul>
<li>Population - who are you interested in?</li>
<li>Intervention - what is the intervention or exposure?</li>
<li>Comparator - are you comparing to a control group, a different treatment?</li>
<li>Outcome - what is the outcome of interest?</li>
<li>Time - how long are you following people up for?</li>
</ul>
<p>This framework might not work in all cases but it is a helpful place to start</p>
</section>
<section id="picot-example" class="level2">
<h2 class="anchored" data-anchor-id="picot-example">PICOT example</h2>
<p>Is a pedometer and activity coaching intervention effective in limiting gestational weight gain in obese pregnant women compared to a pedometer with self-managed activity over the course of their pregnancy.</p>
</section>
<section id="picot-example---population" class="level2">
<h2 class="anchored" data-anchor-id="picot-example---population">PICOT example - Population</h2>
<p>Is a pedometer and activity coaching intervention effective in limiting gestational weight gain in <strong>obese pregnant women</strong> compared to a pedometer with self-managed activity over the course of their pregnancy.</p>
</section>
<section id="picot-example---intervention" class="level2">
<h2 class="anchored" data-anchor-id="picot-example---intervention">PICOT example - Intervention</h2>
<p>Is a <strong>pedometer and activity coaching intervention</strong> effective in limiting gestational weight gain in obese pregnant women compared to a pedometer with self-managed activity over the course of their pregnancy.</p>
</section>
<section id="picot-example---comparator" class="level2">
<h2 class="anchored" data-anchor-id="picot-example---comparator">PICOT example - Comparator</h2>
<p>Is a pedometer and activity coaching intervention effective in limiting gestational weight gain in obese pregnant women compared to <strong>a pedometer with self-managed activity</strong> over the course of their pregnancy.</p>
</section>
<section id="picot-example---outcome" class="level2">
<h2 class="anchored" data-anchor-id="picot-example---outcome">PICOT example - Outcome</h2>
<p>Is a pedometer and activity coaching intervention effective in limiting <strong>gestational weight gain</strong> in obese pregnant women compared to a pedometer with self-managed activity over the course of their pregnancy.</p>
</section>
<section id="picot-example---timeframe" class="level2">
<h2 class="anchored" data-anchor-id="picot-example---timeframe">PICOT example - Timeframe</h2>
<p>Is a pedometer and activity coaching intervention effective in limiting gestational weight gain in obese pregnant women compared to a pedometer with self-managed activity <strong>over the course of their pregnancy</strong>.</p>
<ul>
<li>P - Obese women</li>
<li>I - pedometer and activity coaching intervention</li>
<li>C - a pedometer with self-managed activity</li>
<li>O - gestational weight gain</li>
<li>T - over the course of their pregnancy</li>
</ul>
<p>I want to point out that coming up with good and concise research questions really is a skill and it takes practice. I find it’s much easier to just write a general version of your research question - a rough draft - and workshop it into something specific</p>
</section>
<section id="study-designs" class="level2">
<h2 class="anchored" data-anchor-id="study-designs">Study designs</h2>
<p>Observational studies:</p>
<ul>
<li>Cross-sectional (single measurement)</li>
<li>Case-control study</li>
<li>Cohort study:
<ul>
<li>Retrospective cohort</li>
<li>Prospective cohort</li>
</ul></li>
</ul>
<p>Experimental studies:</p>
<ul>
<li>Randomised studies</li>
<li>Non-randomised studies</li>
</ul>
<p>It can also help to consider what the right study design is to answer your research question. Different studies require different levels of involvement. I already know that you’re incredibly busy outside of trying to do research, so thinking about how much time you have available is important. I wouldn’t suggest committing to a randomised controlled trial if you or your colleagues haven’t got the time to drive it. Not everything needs to be a randomised controlled trial</p>
<p>Cross-sectional studies are relatively easy, there’s no follow up, no risk of people dropping out. However you can’t determine cause and effect. Useful for hypothesis generation, can be done using medical records (e.g.&nbsp;taking a cross-section of patients who attended your clinic during 2020). So if we were to think of the pedometer study as a cross section, we might just take a cross section of pregnant women and ask them if they have a pedometer or not and measure their weight.</p>
<p>Selecting people based on their outcome status and obtain information on any exposures retrospectively. Can be done using medical records, but deciding on an appropriate ‘control’ group can be challenging. To fit the pedometer study into this framework we’d have to first define what “excessive gestational weight gain” is, then we could use medical records from a group of women visiting the maternity unit and somehow figure out if they had a pedometer</p>
<p>Identification of a cohort of people without your outcome of interest at some baseline and following them up over time. Tend to be harder to run, suffer from people dropping out of the study</p>
<p>For a prospective cohort, perhaps we ask women whether they have a pedometer on their first visit to the maternity unit then we keep track of their weight over the course of their visits to the unit.</p>
<p>Randomised studies:</p>
<p>People with characteristics or health conditions of interest are recruited into a study and randomly allocated to one or more groups, then followed up over time to see what their outcomes are. These studies also tend to be costly and harder to run but are important for estimating cause and effect of treatments.</p>
<p>So for the pedometer study again, we could recruit pregnant women who visit the maternity unit and randomise them to one of our treatment groups, keeping track of their activity and weight over the course of their pregnancy, then analyse the results at the conclusion of the study.</p>
<p>Sometimes not always feasible to run a randomised trial though - e.g.&nbsp;we wouldn’t want to randomise someone to an exposure group where we force them to smoke cigarettes to examine lung cancer rates.</p>
<p>Non-randomised studies:</p>
<p>An example of a non-randomised study design is a ‘before and after’ study, where we might only use one intervention and take a measurement of our outcome of interest before and after our the intervention is administered. In this example there is no randomisation and we assume any changes in our outcome are due to the implementation of the intervention.</p>
</section>
<section id="the-protocol" class="level2">
<h2 class="anchored" data-anchor-id="the-protocol">The protocol</h2>
<p><img src="step2.png" class="img-fluid"></p>
</section>
<section id="the-protocol-1" class="level2">
<h2 class="anchored" data-anchor-id="the-protocol-1">The protocol</h2>
<p>Use the template: https://www.bhs.org.au/media/koli42au/protocol-template-2018.docx</p>
<p><img src="protocol.png" class="img-fluid"></p>
<p>Use the template for your protocol. It’s helpful, makes it easy to fill in, and is standardised to include all the information you’d expect to find in a protocol.</p>
<p>Your protocol outlines exactly why and how you (and your collaborators) are going to run the study.</p>
<p>It’s a reference framework to guide each step of your study</p>
<p>If you disappeared in the middle of your study, someone else should be able to pick up your protocol and see the study through to the end.</p>
<p>If people want to replicate your study in another setting, the protocol should contain sufficient detail to enable them to do so.</p>
<p>The protocol is also what the ethics committee are going to review to determine whether your research proposal is methodologically sound as well as feasible</p>
</section>
<section id="ethics" class="level2">
<h2 class="anchored" data-anchor-id="ethics">Ethics</h2>
<p><img src="step3.png" class="img-fluid"></p>
</section>
<section id="ethics-1" class="level2">
<h2 class="anchored" data-anchor-id="ethics-1">Ethics</h2>
<p>We need ethics and research governance approval:</p>
<ul>
<li>Before we analyse the data</li>
<li>Before we collect any data</li>
<li>Before we start recruiting participants</li>
<li>Before we access registry data</li>
</ul>
<p>https://www.bhs.org.au/research/ethics-and-research-governance/</p>
<p>Hospital records and other administrative data aren’t collected for the purpose of research, so just because we have access to the data it doesn’t mean that we can start extracting and analysing it</p>
</section>
<section id="plan-your-data-collection" class="level2">
<h2 class="anchored" data-anchor-id="plan-your-data-collection">Plan your data collection</h2>
<p><img src="step4.png" class="img-fluid"></p>
</section>
<section id="plan-your-data-collection-1" class="level2">
<h2 class="anchored" data-anchor-id="plan-your-data-collection-1">Plan your data collection</h2>
<p>If we are relying on existing data:</p>
<ul>
<li>Plan in advance which variables we need</li>
<li>Who is extracting the data?</li>
<li>Is measurement consistent across time?</li>
</ul>
<p>If we are collecting new data:</p>
<ul>
<li>Think about how we will measure things (instruments, surveys, etc.)</li>
<li>Pilot these measures to make sure they work the way we expect</li>
<li>One column per variable</li>
<li>One row per observation</li>
</ul>
<p>Plan in advance. Make a list of variables we need based on your research question and compare them against the reference material or data dictionary for the data source. If the question can’t be answered by the available data we’ll need to change the question or the data source.</p>
<p>Who is extracting the data? Is it just you? Are multiple people extracting data? We need to make sure everyone is on the same page about what data we need so we end up with consistent and usable data</p>
<p>Is measurement consistent across time? One of the challenges of using existing data, especially administrative and routinely collected data, is that if an operational change occurs that affects the way data is collected and we don’t know about it we can end up drawing spurious conclusions based on artefacts of the data.</p>
<p>Are we using a previously validated measure? Are we designing from scratch? Do we need to pilot the measure? Is the measure appropriate for the population we’re interested in? What are the range of values we expect to measure? Do the instruments capture this range?</p>
<p>This is especially important if we’re getting people to fill in the information themselves. If the question is confusing or vague, we’ll end up with a variety of data in formats we weren’t expecting or cannot use. This could be as simple as telling people what date format to use when writing the date.</p>
</section>
<section id="data-collection-tips" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips">Data collection tips</h2>
<p>Here’s a typical (made up) example of a spreadsheet I might receive</p>
<p><img src="data1.png" class="img-fluid"></p>
<p>Let’s go through some of the issues!</p>
</section>
<section id="data-collection-tips-1" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-1">Data collection tips</h2>
<p><img src="data1-1.png" class="img-fluid"></p>
<p>Don’t use colour coding in spreadsheets - my analysis programs can’t see it! Instead create a column to represent that information.</p>
</section>
<section id="data-collection-tips-2" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-2">Data collection tips</h2>
<p><img src="data1-2.png" class="img-fluid"></p>
<p>What’s this cell highlighted for? Don’t encode other important information using colours either - create a column to put comments in</p>
</section>
<section id="data-collection-tips-3" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-3">Data collection tips</h2>
<p><img src="data1-3.png" class="img-fluid"></p>
<p>There’s a lot of information in this one column! Instead split it into multiple columns</p>
</section>
<section id="data-collection-tips-4" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-4">Data collection tips</h2>
<p><img src="data1-4.png" class="img-fluid"></p>
<p>This looks like a typo! Be mindful of manually entering data</p>
</section>
<section id="data-collection-tips-5" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-5">Data collection tips</h2>
<p><img src="data1-5.png" class="img-fluid"></p>
<p>Be careful not to include useless identifiable data in the spreadsheet - that goes for email addresses, names, patient numbers, and more!</p>
</section>
<section id="data-collection-tips-6" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-6">Data collection tips</h2>
<p><img src="data1-6.png" class="img-fluid"></p>
<p>It’s important to make it clear what an empty cell means. Was there no information to record? Write this! Otherwise we can’t tell if we just forgot to record the data, or if there’s another reason it’s missing.</p>
</section>
<section id="data-collection-tips-7" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-7">Data collection tips</h2>
<p><img src="data1-7.png" class="img-fluid"></p>
<p>If multiple people are collecting data make sure you’re all collecting it consistently. Dates are often the biggest problem - some people record D/M/Y, some people record M/D/Y. It doesn’t matter what format you use as long as it’s consistent.</p>
</section>
<section id="data-collection-tips-8" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-8">Data collection tips</h2>
<p><img src="data1-8.png" class="img-fluid"></p>
<p>These two variables have the same name, but they have different values? Maybe they were BMI at baseline and follow-up, but this needs to be explicit in the column names!</p>
</section>
<section id="data-collection-tips-9" class="level2">
<h2 class="anchored" data-anchor-id="data-collection-tips-9">Data collection tips</h2>
<p><img src="data2.png" class="img-fluid"></p>
<p>This dataset looks much better. One column per variable, one row per observation (in this case a person), no identifying information, no unnecessary information</p>
<p>Arguably the frequency column could be further split into two variables, one for the number of tablets, one for the frequency in days.</p>
</section>
<section id="make-a-data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="make-a-data-dictionary">Make a data dictionary</h2>
<p>A data dictionary should include:</p>
<ul>
<li>The name of the variable (e.g.&nbsp;height or blood pressure)</li>
<li>The units of measurement (e.g.&nbsp;cm or mmHg)</li>
<li>The range of values that are possible or plausible (e.g.&nbsp;50cm to 250cm)</li>
<li>A description of the variable (e.g.&nbsp;the highest of three sitting diastolic blood pressure measurements)</li>
<li>Any important notes on the data (e.g.&nbsp;whether the variable was self-reported, whether the measurement device changed halfway through data collection)</li>
</ul>
</section>
<section id="example-data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="example-data-dictionary">Example data dictionary</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Units</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Description</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1 to 8</td>
<td style="text-align: left;">Unique identifier for each participant</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">group</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">1 to 2</td>
<td style="text-align: left;">Participant's randomly allocated group</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">bmi_baseline</td>
<td style="text-align: left;">kg/m^2</td>
<td style="text-align: left;">10 to 50</td>
<td style="text-align: left;">Participant's BMI at baseline</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">bmi_followup</td>
<td style="text-align: left;">kg/m^2</td>
<td style="text-align: left;">10 to 50</td>
<td style="text-align: left;">Participant's BMI at the study endpoint</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">drug</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Rosuvastatin, Atorvastatin</td>
<td style="text-align: left;">Brand of statin administered</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">dose</td>
<td style="text-align: left;">mg</td>
<td style="text-align: left;">5 to 20</td>
<td style="text-align: left;">Prescribed dosage in mg of the medication</td>
<td style="text-align: left;">5mg of Rosuvastatin is equivalent to 10mg of Atorvastatin</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="data-types" class="level2">
<h2 class="anchored" data-anchor-id="data-types">Data types</h2>
<ul>
<li>Nominal - Categories that have no inherent order
<ul>
<li>E.g. Gender or blood type or group allocation</li>
</ul></li>
<li>Ordinal - Categories that have an order
<ul>
<li>E.g. Level of mobility (poor, average, good) and Likert scales</li>
</ul></li>
<li>Interval - Continuously valued data with no meaningful zero, where the difference between values is equal
<ul>
<li>E.g. Temperature in celsius</li>
</ul></li>
<li>Ratio - Like interval data except there is a meaningful zero
<ul>
<li>E.g. Age or blood pressure or drug dosage</li>
</ul></li>
</ul>
<p>For nominal data there isn’t any ordering, they’re just different categories. There isn’t any order to blood types.</p>
<p>For Likert scales, this means scales like “Strongly disagree, disagree, neutral, agree, strongly agree”. In this example there’s a clear ordering going from the strongest level of disagreement through to the strongest level of agreement. Strongly disagree isn’t ‘twice as disagreeable’ just disagree, but there’s an order to options such that we could rank them in some way.</p>
<p>The point about no meaningful zero is important - for example with temperature the difference between 10 and 20 degrees celsius is the same as 20 and 30 degrees celsius - it’s a difference of 10 units in both cases. However, we wouldn’t say that 20 degrees is twice as hot as 10 degrees.</p>
<p>Thinking about the previous example where we couldn’t make statements about something being twice as much, for ratio data we can make those statements. For example, someone age 40 is twice the age of someone aged 20. The zero is also meaningful here as it indicates a complete absence - for example a drug dose of zero means no drug.</p>
</section>
<section id="data-security" class="level2">
<h2 class="anchored" data-anchor-id="data-security">Data security</h2>
<p><strong>This is very important</strong></p>
<p>When collecting study data, we must:</p>
<ul>
<li>Deidentify data and keep records</li>
<li>Have a data storage and disposal plan in your protocol</li>
<li>Do what we say we will in the protocol</li>
<li>Adhere to privacy requirements of the BHS research office</li>
<li>Be able to demonstrate we took reasonable steps to ensure the security of your data</li>
</ul>
<p>We must not:</p>
<ul>
<li>Store identifiable data in a non-password-protected spreadsheet or restricted folder</li>
<li>Share data with people not on the ethics approval</li>
<li>Send data in an unsecure manner, e.g.&nbsp;emailing someone a non-password protected dataset</li>
<li>Send data to personal email addresses or storage platforms</li>
</ul>
</section>
<section id="data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="data-analysis">Data analysis</h2>
<p><img src="step5.png" class="img-fluid"></p>
</section>
<section id="data-analysis-1" class="level2">
<h2 class="anchored" data-anchor-id="data-analysis-1">Data analysis</h2>
<p>I don’t have slides on how to do data analysis, mainly because I’m hesitant to give a set of rote instructions saying “if you have this data do this analysis” as this can lead to doing analysis without thinking about it</p>
<p>After all, you can do an entire degree on how to do data analysis and still not know everything - trust me on this one! Hopefully though we’ve done enough planning in the protocol and the study has gone smoothly enough that the data analysis is simply doing what we said we’d do.</p>
</section>
<section id="no-study-is-perfect" class="level2">
<h2 class="anchored" data-anchor-id="no-study-is-perfect">No study is perfect</h2>
<p>Just like baking, you might set out to make the perfect cake</p>
<p><img src="hog3.jpg" class="img-fluid"></p>
</section>
<section id="no-study-is-perfect-1" class="level2">
<h2 class="anchored" data-anchor-id="no-study-is-perfect-1">No study is perfect</h2>
<p>By coming to talk to me first, we can avoid disasters…</p>
<p><img src="hog1.jpg" class="img-fluid"></p>
</section>
<section id="no-study-is-perfect-2" class="level2">
<h2 class="anchored" data-anchor-id="no-study-is-perfect-2">No study is perfect</h2>
<p>And produce something pretty reasonable instead!</p>
<p><img src="hog2.jpg" class="img-fluid"></p>
</section>
<section id="stats-tips" class="level1">
<h1>Stats tips</h1>
<section id="p-values-forget-about-them" class="level2">
<h2 class="anchored" data-anchor-id="p-values-forget-about-them"><em>P</em>-values, forget about them!</h2>
<p>The <em>p</em>-value is the most commonly misused and misinterpreted statistic</p>
<ul>
<li>Small <em>p</em>-value doesn’t mean we found something</li>
<li>Conversely, a large <em>p</em>-values doesn’t mean there is no effect</li>
<li>Report confidence intervals instead</li>
<li>Think about clinical significance instead</li>
</ul>
<p>Also, don’t put <em>p</em>-values in the baseline/descriptive characteristics table. It’s not useful or necessary.</p>
<p>There’s also no such thing as “trending to significance” - I often see it written “p=0.051 there was a trend towards significance”. There’s absolutely no guarantee that if you collected more data your p-value would get smaller and ‘become significant’. Remembering that statistical significance is not anywhere near as important as you think it is.</p>
<p>Further reading:</p>
<p>Greenland, S., Senn, S.J., Rothman, K.J., Carlin, J.B., Poole, C., Goodman, S.N. and Altman, D.G., 2016. Statistical tests, P values, confidence intervals, and power: a guide to misinterpretations. European journal of epidemiology, 31, pp.337-350.</p>
<p>Altman, D.G. and Bland, J.M., 1995. Statistics notes: Absence of evidence is not evidence of absence. Bmj, 311(7003), p.485.</p>
</section>
<section id="drawing-conclusions-from-exploratory-analysis" class="level2">
<h2 class="anchored" data-anchor-id="drawing-conclusions-from-exploratory-analysis">Drawing conclusions from exploratory analysis</h2>
<p>Don’t analyse every single relationship then report a finding based on a small <em>p</em>-value</p>
<ul>
<li>Even if you use multiple testing ‘corrections’</li>
<li>Use exploratory analysis for hypothesis generation</li>
</ul>
<p>What I mean by exploratory analysis is any time you do not have a pre-specified question or analysis and are ‘exploring’ the data you’ve collected by seeing what variables have relationships (for example a correlation).</p>
<p>Even if you correct for multiple hypothesis tests you are still open to drawing false conclusions based on p-values - your ‘significance threshold’ might now be 0.0001. You will unfortunately end up being even more confident in a finding that is spurious because you thought the multiple testing adjustment meant you wouldn’t make that error.</p>
</section>
<section id="choosing-variables-for-analysis" class="level2">
<h2 class="anchored" data-anchor-id="choosing-variables-for-analysis">Choosing variables for analysis</h2>
<p>Don’t pick variables based on <em>p</em>-values.</p>
<p>Instead, give careful consideration about what variables are important to your outcome.</p>
<p>A common practice is to do a whole bunch of statistical tests between different variables and your outcome and pick the ones with small <em>p</em>-values to go in your main analysis. This includes methods like stepwise regression. Don’t do it. Doing this can cause you to leave out critical variables which you know are prognostic of your outcome.</p>
<p>Further reading:</p>
<p>Smith, G., 2018. Step away from stepwise. Journal of Big Data, 5(1), pp.1-12.</p>
<p>Sun, G.W., Shook, T.L. and Kay, G.L., 1996. Inappropriate use of bivariable analysis to screen risk factors for use in multivariable analysis. Journal of clinical epidemiology, 49(8), pp.907-916.</p>
</section>
<section id="post-hoc-power-calculation" class="level2">
<h2 class="anchored" data-anchor-id="post-hoc-power-calculation">Post-hoc power calculation</h2>
<p>After finding a ‘null’ result (i.e.&nbsp;big <em>p</em>-value), some people suggest doing post-hoc power calculations</p>
<p>Don’t do them, they just re-present the <em>p</em>-value in a different way:</p>
<ul>
<li>A small <em>p</em>-value will come back with ‘high power’</li>
<li>A large <em>p</em>-value will come back with ‘low power’</li>
</ul>
<p>Instead do adequate sample size calculations at the planning stage of your study</p>
<p>Further reading:</p>
<p>Goodman, S.N. and Berlin, J.A., 1994. The use of predicted confidence intervals when planning experiments and the misuse of power when interpreting results. Annals of internal medicine, 121(3), pp.200-206.</p>
<p>Hoenig, J.M. and Heisey, D.M., 2001. The abuse of power: the pervasive fallacy of power calculations for data analysis. The American Statistician, 55(1), pp.19-24.</p>
</section>
<section id="sample-size-calculation" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-calculation">Sample size calculation</h2>
<p>Sample size calculations are not just about using an online calculator to come up with a number</p>
<ul>
<li>You need to consider drop-out rates</li>
<li>Consider the feasibility of the sample size. Do you have the time or staff to be able to recruit and process the number of participants needed?</li>
<li>Costs of recruiting participants. A basic estimate might say you need to recruit more participants that you have funding for.</li>
<li>Consider prior research. Considering what previous studies have found is a good place to start for thinking how much of an effect you think a treatment might have.</li>
<li>Consider clinical significance. How much of a change would we need to see in your outcome to make a case for changing practice?</li>
</ul>
</section>
<section id="dichotomising-continuous-variables" class="level2">
<h2 class="anchored" data-anchor-id="dichotomising-continuous-variables">Dichotomising continuous variables</h2>
<p>Generally speaking, splitting a continuous variable into categories is completely arbitrary and not a good idea. Think about splitting into age groups, say under 50’s and over 50’s. Is there really a difference between people aged 49 versus people aged 50? No, but deciding to put them in separate groups makes the decision that there is.</p>
<p>Splitting a variable into groups might help with presentation in a table, but for statistical analysis if a variable is continuous, keep it that way.</p>
<p>Further reading:</p>
<p>Altman, D.G. 1994. Problems in dichotomizing continuous variables. Am J Epidemiol. 139(4), pp.442-445.</p>
<p>Altman, D.G. and Royston, P., 2006. The cost of dichotomising continuous variables. Bmj, 332(7549), p.1080.</p>
</section>
<section id="correlation-and-causation" class="level2">
<h2 class="anchored" data-anchor-id="correlation-and-causation">Correlation and causation</h2>
<p>Ice cream sales and aggressive behaviour are positively correlated</p>
<p>Do ice cream sales cause aggressive behaviour?</p>
<p><img src="dag1.png" class="img-fluid"></p>
</section>
<section id="correlation-and-causation-1" class="level2">
<h2 class="anchored" data-anchor-id="correlation-and-causation-1">Correlation and causation</h2>
<p>Or does aggressive behaviour cause an increase in ice cream sales?</p>
<p><img src="dag2.png" class="img-fluid"></p>
</section>
<section id="correlation-and-causation-2" class="level2">
<h2 class="anchored" data-anchor-id="correlation-and-causation-2">Correlation and causation</h2>
<p>Maybe there’s a common cause, like hot weather!</p>
<p><img src="dag3.png" class="img-fluid"></p>
<p>This one’s a classic, but let’s start off from basics. We know that ice cream sales and violent crime are correlated. This means that when one changes, so does the other. In the case of ice cream sales and violent crime, when sales go up so does violent crime - they are positively correlated.</p>
<p>However, just because the two are correlated, it doesn’t mean that one causes the other. Increasing ice cream sales does not cause violent crime and conversely increasing violent crime does not cause ice cream sales to go up.</p>
<p>There’s a third common factor here - the temperature. As summer comes along and the temperature goes up, so do ice cream sales (who doesn’t like an ice cream on a hot day). Violent crime also goes up during summer - maybe because people are hot and bothered, maybe because people spend more time outdoors so there are more opportunities for violent crime to occur, who knows.</p>
<p>The point here is that just because you find that two things are correlated with each other, it doesn’t mean that there’s a causal relationship between them.</p>
</section>
<section id="in-conclusion" class="level2">
<h2 class="anchored" data-anchor-id="in-conclusion">In conclusion</h2>
<ul>
<li>Talk to a statistician early and often</li>
<li>Come up with <strong>specific</strong> research questions</li>
<li>Getting your protocol right will save you headaches later</li>
<li>Don’t get hung up on doing a perfect study</li>
</ul>
<p>Thanks to</p>
<ul>
<li>Andrew Althouse</li>
<li>Darren Dahly</li>
<li>Isabella Ghement</li>
<li>Maarten van Smeden</li>
<li>Sabine Braat and the MISCH team</li>
</ul>
<p>And numerous other people who contributed in various ways to this presentation</p>
</section>
<section id="the-end" class="level2">
<h2 class="anchored" data-anchor-id="the-end">The end</h2>
<p>For more reading on ‘common statistical myths’ see https://discourse.datamethods.org/t/reference-collection-to-push-back-against-common-statistical-myths/1787</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>